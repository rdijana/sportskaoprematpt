var lokacija=location.href;function prikaziMeni(){$.ajax({url:"assets/data/meni.json",method:"GET",type:"json",success:function(e){let i="";for(let a of e)i+=`<li><a href="${a.href}">${a.naziv}</a></li>`;document.getElementById("navigacija").innerHTML=i,document.getElementById("din").innerHTML=i,document.getElementById("meniFuter").innerHTML=i}})}function meni(){var e=document.querySelector("#nav a"),i=document.querySelector("#nav ul");e.addEventListener("click",function(e){e.preventDefault(),i.classList.toggle("vidljiv"),i.classList.toggle("nevidljiv")})}function upisiProizvodeULocalStorage(e,i){localStorage&&(localStorage.setItem(e,JSON.stringify(i)),console.log(e),console.log(i))}function sviProizvodi(){let e=JSON.parse(localStorage.getItem("proizvodi"));return console.log(e),e}function ispisiProizvode(e){document.querySelector("#proizvodi").innerHTML=function(){let i="";if(e.length>0)for(let a of e)i+=`<div class="col-5 col-md-3 mb-3 pt-2 ceoBlok">\n <img src="${a.slika}" alt="${a.naziv}" class="img-fluid"/>\n <p class="border-bottom borderdark "><small>Dostupno boja:${a.dostupnost}</small></p>\n <p class="border-bottom pb-3 mb0" >${a.naziv}</p>\n <div class="proizvod_futer pt-2 pb-3">\n <span class="red">${a.cena.nova} RSD </span></br>\n <span><del>${a.cena.stara} RSD </del></span>\n </div>\n </div>`;else i='<div class="col-12 nema">\n <h3 class="text-center">Trenutno ne postoji takav proizvod u ponudi.Žao nam je.</h3>\n </div>';return i}(),$(".ceoBlok").hover(function(){$(this).css({boxShadow:"8px 8px 8px 12px rgba(216, 216, 216, 0.5)",transition:"box-shadow 0.5s"})},function(){$(this).css({boxShadow:"none"})})}function nema(){document.querySelector("#proizvodi").innerHTML='<div class="col-12 nema">\n        <h3 class="textcenter">Trenutno ne postoji takav proizvod u ponudi.Žao nam je.</h3>\n        </div>'}function ispisBrendova(){var e=sviProizvodi(),i=[];e.forEach(e=>{i.includes(e.marka.nazivBrenda)||i.push(e.marka.nazivBrenda)}),sortirani=i.sort(),brendoviKlk(sortirani)}function brendoviKlk(e){var i="";e.forEach(e=>{i+=`<input type="checkbox" name="chbBrend" value="${e}" class="brend"/> <lab\nel> ${e}</label></br>`}),document.getElementById("marka").innerHTML=i,document.getElementById("markaDva").innerHTML=i}function filteriMR(){$(".prikazFiltera").click(function(){$(this).find("i").toggleClass("fas fa-sort-down"),$(this).find("i").toggleClass("fas fa-sort-up"),$(this).next().slideToggle("fast")})}function sortiranjeProizvoda(){var e=this.value,i=sviProizvodi();localStorage.getItem("filteri")&&(i=JSON.parse(localStorage.getItem("filteri"))),i.sort(function(i,a){return"0"==e?sviProizvodi():"opadajuceCena"==e?i.cena.nova==a.cena.nova?0:i.cena.nova>a.cena.nova?-1:1:"rastuceCena"==e?i.cena.nova==a.cena.nova?0:i.cena.nova>a.cena.nova?1:-1:"opadajuceNaziv"==e?i.naziv==a.naziv?0:i.naziv>a.naziv?-1:1:void 0}),ispisiProizvode(i)}$(".scrollToTop").click(function(){$("html,body").animate({scrollTop:0},"1000")}),$(window).scroll(function(){$(this)[0].scrollY>300?($(".scrollToTop").addClass("vidljiv"),$(".scrollToTop").removeClass("nevidljiv")):($(".scrollToTop").removeClass("vidljiv"),$(".scrollToTop").addClass("nevidljiv"))}),$(".srce").hover(function(){$(this).animate({opacity:"0.2"},"slow")},function(){$(this).animate({opacity:"1"},"slow")}),-1!=lokacija.indexOf("index.html")&&(window.onload=function(){prikaziMeni(),meni(),setInterval(function(){var e,i;e=$("#slajder .vidljiv"),i=e.next().length?$(".vidljiv").next():e.parent().children(":first"),e.removeClass("vidljiv").addClass("nevidljiv"),i.addClass("vidljiv").removeClass("nevidljiv")},1500),$.ajax({url:"assets/data/muske.json",method:"GET",type:"json",success:function(e){var i=e.sort(function(e,i){return e.hit==i.hit?0:e.hit>i.hit?-1:1}),a=i.slice(0,4);ispisiProizvode(a)}}),$.ajax({url:"assets/data/brend.json",method:"GET",type:"json",success:function(e){let i="";for(b of e)i+=`<div class="col-2"><img src="${b.slika}" alt="brend" class="img-fluid"/></div>`;document.querySelector("#brend").innerHTML=i,$("#brend img").hover(function(){$(this).animate({opacity:"0.5"},"slow")},function(){$(this).animate({opacity:"1"},"slow")})}}),$.ajax({url:"assets/data/marke.json",method:"GET",type:"json",success:function(e){var i;i=e,document.querySelector("#opis").innerHTML=function(){let e="";for(let a of i)e+=`<div class="col-10 col-md-4 proizvod">\n\n <img src="${a.slika}" alt="${a.marka}" class="img-fluid mb-4 mt-5"/>\n\n<h2 class="text-center">${a.marka}</h2>\n <p class="text-center">${a.opis}</p>\n <div class="text-center">\n <p class="tekstClanak">${a.tekst}</p>\n\n<button type="button" class="maloDugme" >Pročitaj više\n</button>\n </div>\n</div>`;return e}()},error:function(e,i,a){}}),setInterval(function(){let e=$("#tekst p.aktivan"),i=e.next();i.length>0?$(i[0]).addClass("aktivan"):$("#tekst p:first-child").addClass("aktivan"),$(e).removeClass("aktivan")},1500)},$("#opis").on("click",".maloDugme",function(){$(this).prev().is(":visible")?($(this).prev().slideUp("slow"),$(this).text("Pročitaj više")):($(this).prev().slideDown("slow"),$(this).text("Sakrij"))})),-1!=lokacija.indexOf("patike.html")&&(prikaziMeni(),meni(),vrstaProizvoda("patike"),filteriMR()),-1!=lokacija.indexOf("trenerke.html")&&(prikaziMeni(),meni(),vrstaProizvoda("trenerke"),filteriMR()),-1!=lokacija.indexOf("torbe.html")&&(prikaziMeni(),meni(),vrstaProizvoda("torbe"),filteriMR());var nizPolova=[],nizBrendova=[],nizCenaMin=[],nizCenaMax=[];function filterPol(){var e=this.value;console.log(e),-1!=$.inArray(e,nizPolova)?nizPolova=nizPolova.filter(i=>e!=i):nizPolova.push(e);var i=sviProizvodi();let a;console.log(i),!localStorage.getItem("filteri")||0==nizBrendova.length&&0==nizCenaMin.length&&0==nizCenaMax.length||(i=JSON.parse(localStorage.getItem("filteri"))),a=i.filter(e=>{if(0==nizPolova.length)return!0;for(let i=0;i<nizPolova.length;i++)if(nizPolova[i]==e.pol)return!0}),0==nizPolova.length&&(a=sviProizvodi()),upisiProizvodeULocalStorage("filtriraniPol",a),upisiProizvodeULocalStorage("filteri",a),ispisiProizvode(a)}function filterBrend(){var e=this.value;-1!=$.inArray(e,nizBrendova)?nizBrendova=nizBrendova.filter(i=>e!=i):nizBrendova.push(e);var i=sviProizvodi();let a;localStorage.getItem("filtriraniPol")&&(i=JSON.parse(localStorage.getItem("filtriraniPol"))),localStorage.getItem("filtriraniCena")&&(i=JSON.parse(localStorage.getItem("filtriraniCena"))),a=i.filter(e=>{if(0==nizBrendova.length)return!0;for(let i=0;i<nizBrendova.length;i++)if(nizBrendova[i]==e.nazivBrenda)return!0}),0==nizBrendova.length&&0==nizCenaMin.length&&0==nizCenaMax.length&&(a=JSON.parse(localStorage.getItem("filtriraniPol"))),upisiProizvodeULocalStorage("filteri",a),0==nizBrendova.length?localStorage.removeItem("filtriraniBrend"):upisiProizvodeULocalStorage("filtriraniBrend",a),a.length?ispisiProizvode(a):nema()}function filterCena(){var e=this.dataset.min,i=this.dataset.max;-1!=$.inArray(e,nizCenaMin)?nizCenaMin=nizCenaMin.filter(i=>e!=i):nizCenaMin.push(e),-1!=$.inArray(i,nizCenaMax)?nizCenaMax=nizCenaMax.filter(e=>i!=e):nizCenaMax.push(i);var a=sviProizvodi();let n;localStorage.getItem("filtriraniPol")&&(a=JSON.parse(localStorage.getItem("filtriraniPol"))),localStorage.getItem("filtriraniBrend")&&(a=JSON.parse(localStorage.getItem("filtriraniBrend"))),n=a.filter(e=>{if(0==nizCenaMin.length||0==nizCenaMax.length)return!0;for(let i=0;i<nizCenaMin.length;i++)for(let a=0;a<nizCenaMax.length;a++)if(e.cena.nova>nizCenaMin[i]&&e.cena.nova<nizCenaMax[i])return!0}),0==nizCenaMin.length&&0==nizCenaMax.length&&0==nizBrendova.length&&(n=JSON.parse(localStorage.getItem("filtriraniPol"))),0==nizCenaMin.length&&0==nizCenaMax.length?localStorage.removeItem("filtriraniCena"):upisiProizvodeULocalStorage("filtriraniCena",n),upisiProizvodeULocalStorage("filteri",n),n.length?ispisiProizvode(n):nema()}function vrstaProizvoda(e){localStorage.removeItem("filtriraniCena"),localStorage.removeItem("filtriraniBrend"),localStorage.removeItem("filteri"),window.onload=function(){$.ajax({url:"assets/data/muske.json",type:"GET",dataType:"json",success:function(i){var a=i.filter(i=>i.tip==e);upisiProizvodeULocalStorage("proizvodi",a),upisiProizvodeULocalStorage("filtriraniPol",a),ispisiProizvode(sviProizvodi()),ispisBrendova(),$(".pol").click(filterPol),$(".brend").click(filterBrend),$(".cena").click(filterCena)},error:function(e){console.error(e)}}),document.getElementById("sortiranje").addEventListener("change",sortiranjeProizvoda)}}if(-1!=lokacija.indexOf("kontakt.html")){prikaziMeni(),meni(),document.getElementById("btnPosalji").addEventListener("click",provera);let e=document.getElementsByClassName("greska");for(let i=0;i<e.length;i++)e[i].classList.add("nevidljiv");function provera(){let e=document.getElementById("tbIme").value;/^[A-ZĆČŽŠĐ]{1}[a-zćčžšđ]{2,14}(\s[A-ZĆČŽŠĐ]{1}[azćčžšđ]{2,14})?$/.test(e)||(document.getElementsByClassName("greska")[0].classList.add("vidljiv"),document.getElementsByClassName("greska")[0].classList.add("red"));let i=document.getElementById("tbPrezime").value;/^[A-ZĆČŽŠĐ]{1}[a-zćčžšđ]{2,19}(\s[A-ZĆČŽŠĐ]{1}[azćčžšđ]{2,19})*$/.test(i)||(document.getElementsByClassName("greska")[1].classList.add("red"),document.getElementsByClassName("greska")[1].classList.add("vidljiv"));let a=document.getElementById("tbEmail").value;/^[a-z][a-z\d\.\-\_]+\@[a-z\d]+(\.[a-z]{2,4})+$/.test(a)||(document.getElementsByClassName("greska")[3].classList.add("red"),document.getElementsByClassName("greska")[3].classList.add("vidljiv"));let n=document.getElementById("tbTel").value;/^(06)[0-69]{1}\/\d{3}[\-]?\d{4}$/.test(n)||(document.getElementsByClassName("greska")[2].classList.add("red"),document.getElementsByClassName("greska")[2].classList.add("vidljiv"));let t=document.getElementById("tbPoruka").value;/^([\w\d\n\s\,\.\!\?])+$/.test(t)||(document.getElementsByClassName("greska")[4].classList.add("red"),document.getElementsByClassName("greska")[4].classList.add("vidljiv"))}}-1!=lokacija.indexOf("autor.html")&&(window.onload=function(){prikaziMeni(),meni()});
